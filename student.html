<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Student - GramVidya</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark edu-navbar sticky-top">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center gap-2" href="#">
          <i class="bi bi-mortarboard-fill brand-icon" aria-hidden="true"></i>
          <span class="fw-bold">GramVidya</span>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navStudent"
          aria-controls="navStudent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navStudent">
          <ul class="navbar-nav mx-lg-auto my-2 my-lg-0 gap-lg-3">
            <li class="nav-item">
              <a class="nav-link" href="#dashboard"
                ><i class="bi bi-speedometer2 me-1"></i>Dashboard</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="resources.html"
                ><i class="bi bi-journal-bookmark me-1"></i>Resources</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="links.html"
                ><i class="bi bi-link-45deg me-1"></i>Links</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="schemes.html"
                ><i class="bi bi-briefcase-fill me-1"></i>Schemes</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link nav-unique-quiz" href="quiz.html"
                ><i class="bi bi-question-circle me-1"></i>Quizzes</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="events.html"
                ><i class="bi bi-calendar-event me-1"></i>Events</a
              >
            </li>
          </ul>
          <div class="d-flex ms-lg-auto gap-2 align-items-center">
            <button
              id="notifBtn"
              class="btn btn-outline-light btn-sm position-relative"
              title="Notifications"
            >
              <i class="bi bi-bell"></i>
              <span
                id="notifBadge"
                class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                style="font-size: 0.6rem"
                >1</span
              >
            </button>

            <div class="profile-wrap dropdown">
              <button
                id="profileBtn"
                class="btn btn-sm btn-light d-flex align-items-center gap-2"
                aria-expanded="false"
              >
                <!-- Use an inline Bootstrap person-circle icon for the profile avatar to avoid missing image files -->
                <i id="profileAvatar" class="bi bi-person-circle profile-avatar" aria-hidden="true" style="font-size:32px;line-height:1"></i>
                <span id="profileName" class="d-none d-sm-inline fw-semibold">My Profile</span>
                <i class="bi bi-caret-down-fill ms-1"></i>
              </button>
              <div
                id="profileMenu"
                class="profile-menu shadow-sm"
                role="menu"
                hidden
              >
                <a class="profile-item" href="profile.html">View Profile</a>
                <a class="profile-item" href="myapps.html">My Applications</a>
                <a class="profile-item" href="help.html">Help & Support</a>
                <div class="dropdown-divider"></div>
                <a id="logoutLink" class="profile-item text-danger" href="#"
                  >Logout</a
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <main class="container py-5">
      <div class="d-flex align-items-center justify-content-between mb-4">
        <div>
          <h1 id="dashboard" class="h3 mb-1">Student Dashboard</h1>
          <p id="welcome" class="text-muted small mb-0"></p>
        </div>
        <div class="text-end d-flex flex-column align-items-end gap-2">
          <div class="fs-6 text-muted">Overall Progress</div>
          <div class="d-flex align-items-center gap-2">
            <div id="overallPercent" class="fw-bold display-6">0%</div>
            <div class="text-muted small">completed</div>
          </div>
          <button
            id="easyModeBtn"
            class="btn btn-sm btn-outline-dark mt-2"
            title="Toggle Easy Mode"
          >
            <i class="bi bi-emoji-smile"></i> Easy Mode
          </button>
        </div>
      </div>

      <div class="row g-4">
        <div class="col-lg-8">
          <div class="card mb-4 shadow-sm">
            <div class="card-body">
              <div
                class="d-flex justify-content-between align-items-center mb-3"
              >
                <h5 class="card-title mb-0">Progress Over Time</h5>
                <small class="text-muted">Last 8 weeks</small>
              </div>
              <canvas id="progressChart" height="140"></canvas>
            </div>
          </div>

          <div class="card mb-4 shadow-sm">
            <div class="card-body">
              <div
                class="d-flex justify-content-between align-items-center mb-3"
              >
                <h5 class="card-title mb-0">Subject Performance</h5>
                <small class="text-muted">Current scores</small>
              </div>
              <canvas id="subjectChart" height="120"></canvas>
            </div>
          </div>

          <div class="card mb-4 shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Recent Activity</h5>
              <ul
                id="activityList"
                class="list-group list-group-flush mt-3"
              ></ul>
            </div>
          </div>
        </div>

        <aside class="col-lg-4">
          <div class="card mb-4 shadow-sm">
            <div class="card-body">
              <h6 class="card-title">Subjects</h6>
              <div id="subjectsList" class="mt-3"></div>
            </div>
          </div>

          <!-- Resources moved to a separate full-width section for clarity -->

          <div class="card mt-4 shadow-sm">
            <div class="card-body">
              <h6 class="card-title">Links</h6>
              <div
                id="studentLinks"
                class="list-group list-group-flush mt-2"
              ></div>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="student.js"></script>
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("/sw.js").catch(function (e) {
          console.warn("SW registration failed", e);
        });
      }
    </script>
  </body>
</html>
