<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Profile - GramVidya</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark edu-navbar sticky-top">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center gap-2" href="student.html">
          <i class="bi bi-mortarboard-fill brand-icon" aria-hidden="true"></i>
          <span class="fw-bold">GramVidya</span>
        </a>
        <div class="d-flex ms-auto">
          <a class="btn btn-light" href="student.html">Back</a>
        </div>
      </div>
    </nav>

    <main class="container py-5">
      <div class="mx-auto" style="max-width:820px">
        <h1 class="h4 mb-3">My Profile</h1>
        <p class="text-muted">View and update your basic profile information stored locally.</p>

        <div class="card shadow-sm mb-4">
          <div class="card-body">
            <form id="profileForm" class="row g-3">
              <div class="col-12 d-flex align-items-center gap-3">
                <i id="avatarIcon" class="bi bi-person-circle" style="font-size:48px;color:var(--edu-navy)"></i>
                <div>
                  <div id="displayName" class="h5 mb-0">Student</div>
                  <div id="displayRole" class="small text-muted">Role: Student</div>
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label">Name</label>
                <input id="nameInput" class="form-control" placeholder="Your name" />
              </div>
              <div class="col-md-6">
                <label class="form-label">Email</label>
                <input id="emailInput" type="email" class="form-control" placeholder="you@example.com" />
              </div>
              <div class="col-12 d-flex gap-2">
                <button id="saveProfile" class="btn btn-primary">Save Profile</button>
                <button id="clearProfile" type="button" class="btn btn-outline-secondary">Clear</button>
              </div>
            </form>
          </div>
        </div>

        <div class="card shadow-sm">
          <div class="card-body">
            <h6 class="card-title">Notes</h6>
            <p class="text-muted small mb-0">This demo stores profile details in your browser's localStorage (demo only). Changes will appear on the Student Dashboard.</p>
          </div>
        </div>
      </div>
    </main>

    <script>
      (function () {
        var nameInput = document.getElementById('nameInput');
        var emailInput = document.getElementById('emailInput');
        var saveBtn = document.getElementById('saveProfile');
        var clearBtn = document.getElementById('clearProfile');
        var displayName = document.getElementById('displayName');
        var displayRole = document.getElementById('displayRole');

        function load() {
          try {
            var n = localStorage.getItem('gv_userName') || '';
            var e = localStorage.getItem('gv_userEmail') || '';
            var r = localStorage.getItem('gv_userRole') || 'Student';
            nameInput.value = n;
            emailInput.value = e;
            displayName.textContent = n || 'Student';
            displayRole.textContent = 'Role: ' + (r || 'Student');
          } catch (e) {}
        }
        load();

        saveBtn.addEventListener('click', function (ev) {
          ev.preventDefault();
          try {
            localStorage.setItem('gv_userName', nameInput.value.trim());
            localStorage.setItem('gv_userEmail', emailInput.value.trim());
          } catch (e) {}
          load();
          alert('Profile saved locally');
        });

        clearBtn.addEventListener('click', function () {
          try {
            localStorage.removeItem('gv_userName');
            localStorage.removeItem('gv_userEmail');
            localStorage.removeItem('gv_userRole');
          } catch (e) {}
          nameInput.value = '';
          emailInput.value = '';
          load();
        });
      })();
    </script>

    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').catch(function (e) {
          console.warn('SW registration failed', e);
        });
      }
    </script>
  </body>
</html>