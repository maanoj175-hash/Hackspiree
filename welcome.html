<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Welcome - GramVidya</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <style>
      :root {
        --hero-h: 78vh;
      }
      html,body{height:100%;}
      body{
        margin:0;
        font-family: Poppins, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
      }
      /* Animated gradient background */
      .bg-animated {
        min-height: var(--hero-h);
        display: grid;
        place-items: center;
        background: linear-gradient(120deg, #0b3d91 0%, #0a9bff 40%, #1e7f5a 100%);
        background-size: 200% 200%;
        animation: gradientShift 8s ease infinite;
        color: #fff;
      }
      @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }

      /* Central hero card */
      .hero-card {
        background: rgba(255,255,255,0.04);
        border-radius: 14px;
        padding: 2.2rem;
        box-shadow: 0 10px 30px rgba(5,15,30,0.25);
        backdrop-filter: blur(6px);
        text-align: center;
        transform: translateY(8px);
        opacity: 0;
        animation: cardIn 700ms ease forwards;
      }
      @keyframes cardIn { to { transform:none; opacity:1; } }

      .brand-big { display:flex; align-items:center; justify-content:center; gap:1rem; }
      .brand-big .brand-icon { font-size:64px; color:var(--edu-gold); }
      .brand-big .brand-title { font-size:48px; font-weight:800; letter-spacing:0.6px; }
      .brand-sub { color:rgba(255,255,255,0.9); font-size:1.05rem; margin-top:.25rem }

      /* CTA styles */
      .btn-cta {
        min-width:180px;
        font-weight:700;
        box-shadow: 0 8px 20px rgba(10,90,170,0.15);
      }
      .btn-cta.pulse {
        animation: pulse 1600ms infinite;
      }
      @keyframes pulse { 0%{ transform:translateY(0); }50%{ transform:translateY(-4px); }100%{ transform:translateY(0); } }

      /* floating accent dots */
      .accent-dot { position:absolute; border-radius:50%; opacity:0.12 }
      .dot-1{ width:220px;height:220px;background:#fff;left:8%;top:14% }
      .dot-2{ width:120px;height:120px;background:#fff;right:6%;bottom:18% }

      @media (max-width:576px){
        .brand-big .brand-title{font-size:32px}
        .brand-big .brand-icon{font-size:44px}
      }
    </style>
  </head>
  <body>
    <div class="bg-animated position-relative">
      <div class="accent-dot dot-1"></div>
      <div class="accent-dot dot-2"></div>

      <div class="hero-card text-center text-white mx-3">
        <div class="brand-big">
          <i class="bi bi-mortarboard-fill brand-icon" aria-hidden="true"></i>
          <div>
            <div class="brand-title">GramVidya</div>
            <div class="brand-sub">Empowering Rural Education — Simple, reliable learning</div>
          </div>
        </div>

        <p id="welcomeMsg" class="lead mt-3 mb-4">Loading...</p>

        <div class="d-flex justify-content-center gap-3">
          <button id="startBtn" class="btn btn-light btn-cta pulse">Go to Dashboard</button>
          <a href="resources.html" class="btn btn-outline-light btn-cta">Explore Resources</a>
        </div>
      </div>
    </div>

    <script>
      (function () {
        var name = localStorage.getItem('gv_userName');
        var msg = document.getElementById('welcomeMsg');
        var start = document.getElementById('startBtn');
        // If not logged in, send back to index
        if (!name) {
          window.location.href = 'index.html';
          return;
        }
        if (msg) msg.textContent = 'Hi ' + name + '! Welcome back — ready to continue your learning?';
        if (start) start.addEventListener('click', function () {
          try { localStorage.setItem('gv_seen_welcome','1'); } catch (e) {}
          window.location.href = 'student.html';
        });
      })();
    </script>

    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').catch(function (e) {
          console.warn('SW registration failed', e);
        });
      }
    </script>
  </body>
</html>